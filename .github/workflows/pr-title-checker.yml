name: "PR Title Checker"
on:
  pull_request:
    branches:
    - main
    types:
      - opened
      - edited

jobs:
  check-pr-title:
    runs-on: ubuntu-latest
    steps:
      - name: test
        id: generate-new-access-key
        run: |
         ls -ltra .
      - uses: deepakputhraya/action-pr-title@master
        id: title-check
g        continue-on-error: true
        with:
          regex: 'CER-\d+' # Regex the title should match.
          # allowed_prefixes: 'feature,fix,JIRA' # title should start with the given prefix
          # disallowed_prefixes: 'feat/,hotfix' # title should not start with the given prefix
          # prefix_case_sensitive: false # title prefix are case insensitive
          # min_length: 5 # Min length of the title
          # max_length: 20 # Max length of the title
          # github_token: ${{ github.token }} # Default: ${{ github.token }
      - uses: dessant/label-actions@v2.2.0
        if: steps.title-check.outcome != 'success' 
        with:
          github-token: ${{ github.token }}
          config-path: '.github/pr-check-label.yml'
      - uses: dessant/label-actions@v2.2.0
        if: steps.title-check.outcome == 'success' 
        with:
          github-token: ${{ github.token }}
          config-path: '.github/pr-check-unlabel.yml'
